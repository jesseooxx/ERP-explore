# tfm01 + tfm02 銷售訂單欄位完整說明

## tfm01 - 銷售主檔 (Sales Contract Master)

### 基本資訊
| 欄位 | 型態 | 長度 | 說明 | 範例 |
|------|------|------|------|------|
| fa01 | varchar | 10 | **S/C 編號 (主鍵)** | 00048 |
| fa02 | char | 1 | 單據類型 (I=?) | I |
| fa03 | varchar | 8 | **建立日期** (YYYYMMDD) | 20121224 |
| fa04 | varchar | 10 | **客戶編號** | 498 |
| fa05 | varchar | 3 | **業務代號** | I04 |
| fa06 | varchar | 5 | (未知) | |
| fa07 | varchar | 30 | **聯絡人姓名** | MR. Udo Fach |
| fa08 | varchar | 20 | **客戶訂單號** | 2011-10230 |
| fa09 | char | 1 | 狀態碼 | 1 |

### 地點與運輸
| 欄位 | 型態 | 長度 | 說明 | 範例 |
|------|------|------|------|------|
| fa10 | varchar | 10 | (運輸相關) | |
| fa11 | varchar | 20 | **起運港 (Port of Loading)** | SHANGHAI |
| fa12 | varchar | 20 | (備用港口) | |
| fa13 | varchar | 20 | (中轉港) | |
| fa14 | varchar | 20 | **目的港 (Destination)** | ROTTERDAM |
| fa15 | varchar | 20 | (最終目的地) | |
| fa16 | varchar | 20 | (備用) | |

### 貿易條件
| 欄位 | 型態 | 長度 | 說明 | 範例 |
|------|------|------|------|------|
| fa17 | varchar | 6 | **貿易條件代碼** | FOB |
| fa18 | varchar | 26 | **貿易條件說明** | FOB SHANGHAI |
| fa19 | varchar | 5 | **幣別** | US$ |
| fa20 | float | - | **匯率** | 30.6 |
| fa21 | float | - | 匯率2 | 1 |
| fa22 | float | - | 匯率3 | 0 |

### 付款與金額
| 欄位 | 型態 | 長度 | 說明 | 範例 |
|------|------|------|------|------|
| fa23 | varchar | 10 | 付款方式代碼 | |
| fa24 | varchar | 10 | 付款條件代碼 | BY SEA |
| fa25-fa30 | float | - | 各種金額欄位 | 0 |
| fa31 | int | - | 付款天數 | 3 |

### 日期欄位
| 欄位 | 型態 | 長度 | 說明 | 範例 |
|------|------|------|------|------|
| fa32 | varchar | 8 | **預計出貨日 (ETD)** | 20111026 |
| fa35 | varchar | 8 | 確認日期 | 20111026 |
| fa46 | varchar | 8 | 其他日期 | |
| fa75 | varchar | 8 | 建立日期 | |
| fa77 | varchar | 8 | 修改日期 | 20110926 |
| fa82 | varchar | 8 | 其他日期 | |

### 備註欄位
| 欄位 | 型態 | 長度 | 說明 | 範例 |
|------|------|------|------|------|
| fa33 | varchar | 80 | **備註1** | SEE BELOW. |
| fa34 | varchar | 80 | **付款條件說明** | BY T/T WITHIN 30 DAYS AFTER SHIPPING DAY. |
| fa54 | varchar | 30 | 備註2 | |
| fa55 | varchar | 30 | 備註3 | |

### 狀態標記 (Y/N)
| 欄位 | 型態 | 說明 | 範例 |
|------|------|------|------|
| fa360 | char(1) | 狀態1 | 1 |
| fa361 | char(1) | 狀態2 | 1 |
| fa362 | char(1) | 狀態3 | 1 |
| fa363 | char(1) | 狀態4 | 3 |
| fa364 | char(1) | 狀態5 | N |
| fa365 | char(1) | 狀態6 | N |
| fa366 | char(1) | 狀態7 | N |
| fa63 | char(1) | 完成標記 | N |
| fa64 | char(1) | 取消標記 | N |

### 金額統計
| 欄位 | 型態 | 說明 | 範例 |
|------|------|------|------|
| fa37 | float | **總金額** | 7282 |
| fa38 | float | 其他金額 | 0 |
| fa41 | float | 稅額 | 0 |
| fa49-fa51 | float | 各種小計 | 0 |

### 關聯欄位
| 欄位 | 型態 | 長度 | 說明 | 範例 |
|------|------|------|------|------|
| fa39 | varchar | 2 | 部門代碼 | M5 |
| fa40 | varchar | 10 | 倉庫代碼 | |
| fa56-fa59 | varchar | 10 | 各種關聯代碼 | |
| fa83 | varchar | 10 | 建立者 | I04 |
| fa84 | varchar | 10 | 修改者 | |

---

## tfm02 - 銷售明細 (Sales Contract Detail)

### 基本資訊
| 欄位 | 型態 | 長度 | 說明 | 範例 |
|------|------|------|------|------|
| fb01 | varchar | 10 | **S/C 編號 (外鍵→fa01)** | 00048 |
| fb02 | float | - | **項次序號** | 1, 2 |
| fb03 | varchar | 20 | **產品編號** | CN-91200100 |
| fb04 | varchar | 20 | 產品編號2 | |
| fb05 | varchar | 16 | 規格 | |

### 產品說明
| 欄位 | 型態 | 長度 | 說明 | 範例 |
|------|------|------|------|------|
| fb06 | varchar | 22 | **品名第1行** | Composter ABB650 hot-dip zinc |
| fb07 | varchar | 30 | **品名第2行** | plated basket material list: |
| fb08 | varchar | 30 | 品名第3行 | |

### 數量與單價
| 欄位 | 型態 | 長度 | 說明 | 範例 |
|------|------|------|------|------|
| fb09 | float | - | **訂購數量** | 200 |
| fb10 | varchar | 6 | **單位** | PC, UNIT |
| fb11 | float | - | **單價** | 1 |
| fb12 | float | - | **金額** | 182.87 |
| fb13 | varchar | 10 | 供應商代碼 | A19073 |
| fb14 | int | - | 序號 | 1 |
| fb15 | varchar | 5 | 幣別 | RMB, US$ |
| fb16 | float | - | 成本價 | 182.87 |

### 匯率與換算
| 欄位 | 型態 | 說明 | 範例 |
|------|------|------|------|
| fb170 | float | 匯率1 | 4.6882 |
| fb171 | float | 匯率2 | 28.01736 |
| fb18 | float | 換算金額 | 35.2 |
| fb19 | float | 換算金額2 | 35.2 |
| fb20 | float | 其他金額 | 0 |
| fb21 | float | 其他金額 | 0 |

### 包裝資訊
| 欄位 | 型態 | 長度 | 說明 | 範例 |
|------|------|------|------|------|
| fb22 | varchar | 6 | 內包裝數量 | |
| fb23 | float | - | **外箱裝數量** | 1 |
| fb24 | varchar | 6 | 包裝單位 | 箱 |
| fb25 | float | - | **材積 (CBM/CUFT)** | 0 |
| fb26 | varchar | 6 | **材積單位** | CU'FT |
| fb27 | float | - | 重量 | 0 |
| fb28 | varchar | 6 | 重量單位 | KG |
| fb29 | float | - | 其他 | 0 |

### 其他數量
| 欄位 | 型態 | 說明 |
|------|------|------|
| fb30-fb39 | float | 各種數量欄位 (已出貨、已排程等) |
| fb41-fb47 | float | 統計數量 |

### 備註
| 欄位 | 型態 | 長度 | 說明 |
|------|------|------|------|
| fb48-fb51 | varchar | 20 | 備註欄位 |
| fb57-fb61 | varchar | 255 | 長備註欄位 |

### 狀態
| 欄位 | 型態 | 說明 | 範例 |
|------|------|------|------|
| fb53 | varchar(1) | 完成標記 | N |
| fb56 | varchar(1) | 取消標記 | Y |
| fb67 | varchar(1) | 其他標記 | N |

---

## 建立新訂單的必填欄位

### tfm01 最少需要：
```sql
INSERT INTO tfm01 (
    fa01,  -- S/C 編號 (必須唯一)
    fa02,  -- 類型
    fa03,  -- 日期
    fa04,  -- 客戶編號
    fa05,  -- 業務代號
    fa08,  -- 客戶訂單號
    fa19,  -- 幣別
    fa20   -- 匯率
) VALUES (
    '新編號', 'I', '20251218', '客戶編號', '業務', '訂單號', 'US$', 30
);
```

### tfm02 最少需要：
```sql
INSERT INTO tfm02 (
    fb01,  -- S/C 編號 (對應 fa01)
    fb02,  -- 項次
    fb03,  -- 產品編號
    fb06,  -- 品名
    fb09,  -- 數量
    fb10,  -- 單位
    fb11   -- 單價
) VALUES (
    '對應的S/C編號', 1, '產品編號', '產品名稱', 100, 'PC', 10.5
);
```

---

## 注意事項

1. **fa01 必須唯一** - 先查詢 `SELECT MAX(fa01) FROM tfm01` 確認最大編號
2. **fb01 必須對應 fa01** - 明細的 fb01 要等於主檔的 fa01
3. **日期格式** - 使用 YYYYMMDD (如 20251218)
4. **數值欄位** - 沒有值就填 0，不要留 NULL
5. **字串欄位** - 沒有值就填空字串 ''
