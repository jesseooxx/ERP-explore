# TSM - 運作參數

```yaml
---
module_id: tsm
name_zh: "運作參數"
name_en: "Runtime Parameters"
table_range: tsm01-tsm13
field_prefix: "{varies}"
layer: configuration
scope: module
tables: 15
index: "./_index.yaml"
---
```

## 模組概述

TSM 儲存交易處理過程中使用的運作參數和轉換因子。不同於 TAM (靜態設定)，TSM 的值可能根據營運需求而變動。

---

## 資料表清單

| 資料表 | 用途 | 範例值 |
|-------|---------|----------------|
| tsm01 | **系統啟動參數** | IC15=35.315 (立方公尺轉立方英尺) |
| tsm02 | 數字格式 | 小數位數、分隔符號 |
| tsm03 | **單位轉換** | PCS <-> BOX <-> PALLET |
| tsm04 | **報表格式** | 發票範本、裝箱單 |
| tsm05 | 列印設定 | 印表機、邊界 |
| tsm06 | 自動編號種子 | 目前序號 |
| tsm07 | 計算模式 | 四捨五入、精確度 |
| tsm08-09 | 保留 | - |
| tsm10 | **單據編號規則** | 前綴、後綴、長度 |
| tsm11-13 | 模組專屬參數 | 各異 |

---

## 重要資料表

### TSM01 - 系統參數

```yaml
table: tsm01
purpose: "核心計算參數"
```

| 參數 | 值 | 用途 |
|-----------|-------|-------|
| IC15 | 35.315 | 立方公尺轉立方英尺轉換因子 |
| IC16 | 2.205 | 公斤轉磅轉換因子 |
| IC20 | Y/N | 出貨時自動建立應收帳款 |
| IC21 | Y/N | PO 時自動建立應付帳款 |

### TSM03 - 單位轉換

```yaml
table: tsm03
purpose: "計量單位轉換"
```

| 來源 | 目標 | 因子 | 使用於 |
|------|-----|--------|---------|
| PCS | BOX | 可變 | `[[thm03]]` 包裝 |
| BOX | PALLET | 可變 | 出貨 |
| KG | LBS | 2.205 | 重量顯示 |
| CBM | CUFT | 35.315 | 體積顯示 |

### TSM04 - 報表格式

```yaml
table: tsm04
purpose: "文件範本定義"
```

| 格式代碼 | 文件 | 範本欄位 |
|-------------|----------|-----------------|
| INV01 | 發票 | 表頭、明細、總計 |
| PKG01 | 裝箱單 | 箱數、重量、尺寸 |
| MRK01 | 嘜頭 | 商標、文字區塊 |
| SC01 | 銷售合約 | 條款、品項 |
| PO01 | 採購單 | 供應商、品項 |

### TSM10 - 單據編號

```yaml
table: tsm10
purpose: "單據自動編號規則"
```

| 單據類型 | 格式 | 範例 |
|----------|---------|---------|
| PI | {YY}{MM}{NNNN} | 2512-0001 |
| PO | {PI}-{NN} | 00048-01 |
| INV | {YY}{MM}-{NNNN} | 2512-0001 |

---

## 跨模組使用

```yaml
used_by:
  tfm:
    - "tsm10 -> PI 編號產生"
    - "tsm04 -> PI 列印格式"
  tgm:
    - "tsm10 -> PO 編號產生"
    - "tsm04 -> PO 列印格式"
  thm:
    - "tsm01.IC15 -> 立方公尺計算"
    - "tsm03 -> 包裝單位轉換"
    - "tsm04 -> 發票、裝箱單、嘜頭格式"
```

---

## 與 TAM 的關係

```yaml
configuration_layers:
  tam:
    scope: "全域、鮮少變動"
    examples: "公司資訊、幣別、港口"
  tsm:
    scope: "營運層、可能變動"
    examples: "數字格式、轉換因子、範本"
```

---

## 導覽

- **上一頁**: `./01-tam.md` (系統設定)
- **下一頁**: `./03-tbm.md` (客戶主檔)
- **索引**: `./_index.yaml`
