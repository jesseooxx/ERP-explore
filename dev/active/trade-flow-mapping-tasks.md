# Trade Module Flow Mapping - Tasks

## Last Updated: 2025-12-26

---

## Phase 1: 產品主檔欄位對應 ✅ COMPLETED

- [x] 查詢 tdm01 產品基本資料結構
- [x] 查詢 tdm02 產品子描述結構
- [x] 查詢 tdm05 產品BOM結構
- [x] 查詢 tdm09 售價等級結構
- [x] 查詢 tcm01 供應商基本資料結構
- [x] 查詢 tcm05 供應商產品關係結構
- [x] 查詢 tem01 報價單主檔結構
- [x] 查詢 tem02 報價單明細結構
- [x] 查詢 tem05 報價BOM結構
- [x] 查詢 tfm01 訂單主檔結構
- [x] 查詢 tfm02 訂單明細結構
- [x] 驗證 284102 產品資料
- [x] 更新文檔
- [x] 提交到 Git

---

## Phase 2: 訂單轉需求作業 🔄 NEXT

- [ ] 查詢所有 t*m 系列資料表清單
- [ ] 識別訂單轉需求相關表
  - [ ] tfm03 產品出貨排程?
  - [ ] tfm04 訂單出貨排程?
  - [ ] tfm05 訂單選擇採購單?
- [ ] 查詢欄位結構
- [ ] 找出與 tfm01/tfm02 的連動欄位
- [ ] 記錄編號生成規則

---

## Phase 3: 出口採購作業

- [ ] 識別採購單相關表 (推測 tpm 系列)
  - [ ] tpm01 採購單主檔?
  - [ ] tpm02 採購單明細?
- [ ] 查詢欄位結構
- [ ] 找出與訂單的連動欄位
- [ ] 找出與供應商的連動欄位
- [ ] 記錄採購單編號規則

---

## Phase 4: 船務出口出貨作業

- [ ] 識別出貨單相關表 (推測 tsm 系列)
  - [ ] tsm01 出貨單主檔?
  - [ ] tsm02 出貨單明細?
- [ ] 查詢欄位結構
- [ ] 找出與訂單的連動欄位
- [ ] 找出與採購單的連動欄位
- [ ] 記錄出貨單編號規則

---

## Phase 5: 編號連動關係圖

- [ ] 建立完整流程圖 (Mermaid)
- [ ] 標註所有單據編號格式
- [ ] 標註欄位間的 FK 關係
- [ ] 標註狀態流轉
- [ ] 驗證一筆完整訂單的全流程追蹤

---

## Phase 6: 文檔整理

- [ ] 建立完整貿易流程文檔
- [ ] 更新 CLAUDE.md (如需要)
- [ ] 提交到 Git

---

## Quick Reference

### 已確認的表
| 表名 | 用途 | 主鍵 |
|------|------|------|
| tdm01 | 產品基本資料 | da01 |
| tdm02 | 產品子描述 | (db01, db02) |
| tdm05 | 產品BOM | (de01, de02) |
| tcm01 | 供應商基本資料 | ca01 |
| tcm05 | 供應商產品 | (ce010, ce011, ce02, ce04) |
| tem01 | 報價單主檔 | ea01 |
| tem02 | 報價單明細 | (eb01, eb02) |
| tem05 | 報價BOM | (ee010, ee011, ee02, ee03) |
| tfm01 | 訂單主檔 | fa01 |
| tfm02 | 訂單明細 | (fb01, fb02) |

### 待確認的表 (推測)
| 表名 | 推測用途 |
|------|----------|
| tfm03 | 產品出貨排程 |
| tfm04 | 訂單出貨排程 |
| tfm05 | 訂單選採購 |
| tpm01 | 採購單主檔 |
| tpm02 | 採購單明細 |
| tsm01 | 出貨單主檔 |
| tsm02 | 出貨單明細 |

### 查詢起點
```python
# 使用現有腳本查詢新表
python sql/query_trade_schema.py
```
